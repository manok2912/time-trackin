(this.webpackJsonptime_tracking_app=this.webpackJsonptime_tracking_app||[]).push([[0],{14:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n(1),o=n.n(r),a=n(7),c=n.n(a),s=n(2),l=n(3),p=n(5),u=n(4);function h(t){if(t.status>=200&&t.status<300)return t;var e=new Error("HTTP Error ".concat(t.statusText));throw e.status=t.statusText,e.response=t,console.log(e),e}function d(t){return t.json()}var m={getTimers:function(t){return fetch("https://time-racker.herokuapp.com/api/timers",{headers:{Accept:"application/json"}}).then(h).then(d).then(t)},createTimer:function(t){return fetch("https://time-racker.herokuapp.com/api/timers",{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(h)},updateTimer:function(t){return fetch("https://time-racker.herokuapp.com/api/timers",{method:"put",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(h)},startTimer:function(t){return fetch("https://time-racker.herokuapp.com/api/timers/start",{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(h)},stopTimer:function(t){return fetch("https://time-racker.herokuapp.com/api/timers/stop",{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(h)},deleteTimer:function(t){return fetch("https://time-racker.herokuapp.com/api/timers",{method:"delete",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(h)}},j=n(13).v4;function b(t){var e=Math.floor(t/1e3%60),n=Math.floor(t/1e3/60%60);return[f(Math.floor(t/1e3/60/60).toString(),2),f(n.toString(),2),f(e.toString(),2)].join(":")}function f(t,e){for(var n=t;n.length<e;)n="0".concat(n);return n}var O={millisecondsToHuman:b,newTimer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={title:t.title||"Timer",project:t.project||"Project",id:j(),elapsed:0};return e},findById:function(t,e,n){t.forEach((function(t){t.id!==e||n(t)}))},renderElapsedString:function(t,e){var n=t;return e&&(n+=Date.now()-e),b(n)}},S=function(t){Object(p.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(s.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={timers:[]},t.loadTimersFromServer=function(){m.getTimers((function(e){return t.setState({timers:e})}))},t.handleCreateFormSubmit=function(e){t.createTimer(e)},t.handleEditFormSubmit=function(e){t.updateTimer(e)},t.handleTrashClick=function(e){t.deleteTimer(e)},t.handleStartClick=function(e){t.startTimer(e)},t.handleStopClick=function(e){t.stopTimer(e)},t.createTimer=function(e){var n=O.newTimer(e);t.setState({timers:t.state.timers.concat(n)}),m.createTimer(n)},t.updateTimer=function(e){t.setState({timers:t.state.timers.map((function(t){return t.id===e.id?Object.assign({},t,{title:e.title,project:e.project}):t}))}),m.updateTimer(e)},t.deleteTimer=function(e){t.setState({timers:t.state.timers.filter((function(t){return t.id!==e}))}),m.deleteTimer({id:e})},t.startTimer=function(e){var n=Date.now();t.setState({timers:t.state.timers.map((function(t){return t.id===e?Object.assign({},t,{runningSince:n}):t}))}),m.startTimer({id:e,start:n})},t.stopTimer=function(e){var n=Date.now();t.setState({timers:t.state.timers.map((function(t){if(t.id===e){var i=n-t.runningSince;return Object.assign({},t,{elapsed:t.elapsed+i,runningSince:null})}return t}))}),m.stopTimer({id:e,stop:n})},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadTimersFromServer(),setInterval(this.loadTimersFromServer,5e3)}},{key:"render",value:function(){return Object(i.jsx)("div",{className:"ui three column centered grid",children:Object(i.jsxs)("div",{className:"column",children:[Object(i.jsx)(C,{timers:this.state.timers,onFormSubmit:this.handleEditFormSubmit,onTrashClick:this.handleTrashClick,onStartClick:this.handleStartClick,onStopClick:this.handleStopClick}),Object(i.jsx)(v,{onFormSubmit:this.handleCreateFormSubmit})]})})}}]),n}(o.a.Component),v=function(t){Object(p.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(s.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={isOpen:!1},t.handleFormOpen=function(){t.setState({isOpen:!0})},t.handleFormClose=function(){t.setState({isOpen:!1})},t.handleFormSubmit=function(e){t.props.onFormSubmit(e),t.setState({isOpen:!1})},t}return Object(l.a)(n,[{key:"render",value:function(){return this.state.isOpen?Object(i.jsx)(x,{onFormSubmit:this.handleFormSubmit,onFormClose:this.handleFormClose}):Object(i.jsx)("div",{className:"ui basic content center aligned segment",children:Object(i.jsx)("button",{className:"ui basic button icon",onClick:this.handleFormOpen,children:Object(i.jsx)("i",{className:"plus icon"})})})}}]),n}(o.a.Component),C=function(t){Object(p.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.props.timers.map((function(e){return Object(i.jsx)(k,{id:e.id,title:e.title,project:e.project,elapsed:e.elapsed,runningSince:e.runningSince,onFormSubmit:t.props.onFormSubmit,onTrashClick:t.props.onTrashClick,onStartClick:t.props.onStartClick,onStopClick:t.props.onStopClick},e.id)}));return Object(i.jsx)("div",{id:"timers",children:e})}}]),n}(o.a.Component),k=function(t){Object(p.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(s.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={editFormOpen:!1},t.handleEditClick=function(){t.openForm()},t.handleFormClose=function(){t.closeForm()},t.handleSubmit=function(e){t.props.onFormSubmit(e),t.closeForm()},t.closeForm=function(){t.setState({editFormOpen:!1})},t.openForm=function(){t.setState({editFormOpen:!0})},t}return Object(l.a)(n,[{key:"render",value:function(){return this.state.editFormOpen?Object(i.jsx)(x,{id:this.props.id,title:this.props.title,project:this.props.project,onFormSubmit:this.handleSubmit,onFormClose:this.handleFormClose}):Object(i.jsx)(g,{id:this.props.id,title:this.props.title,project:this.props.project,elapsed:this.props.elapsed,runningSince:this.props.runningSince,onEditClick:this.handleEditClick,onTrashClick:this.props.onTrashClick,onStartClick:this.props.onStartClick,onStopClick:this.props.onStopClick})}}]),n}(o.a.Component),g=function(t){Object(p.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(s.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).handleStartClick=function(){t.props.onStartClick(t.props.id)},t.handleStopClick=function(){t.props.onStopClick(t.props.id)},t.handleTrashClick=function(){t.props.onTrashClick(t.props.id)},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.forceUpdateInterval=setInterval((function(){return t.forceUpdate()}),50)}},{key:"componentWillUnmount",value:function(){clearInterval(this.forceUpdateInterval)}},{key:"render",value:function(){var t=O.renderElapsedString(this.props.elapsed,this.props.runningSince),e=6===(new Date).getDay()?21600:32400,n=t.split(":"),r=60*+n[0]*60+60*+n[1]+ +n[2];return Object(i.jsxs)("div",{className:"ui centered card",children:[Object(i.jsxs)("div",{className:"content",children:[Object(i.jsx)("div",{className:"header",children:this.props.title}),Object(i.jsx)("div",{className:"meta",children:this.props.project}),Object(i.jsx)("div",{className:"center aligned description",children:Object(i.jsx)("h2",{className:"ui header "+(r>e?"red":"grey"),children:t})}),Object(i.jsxs)("div",{className:"extra content",children:[Object(i.jsx)("span",{className:"right floated edit icon",onClick:this.props.onEditClick,children:Object(i.jsx)("i",{className:"edit icon"})}),Object(i.jsx)("span",{className:"right floated trash icon",onClick:this.handleTrashClick,children:Object(i.jsx)("i",{className:"trash icon"})})]})]}),Object(i.jsx)(T,{timerIsRunning:!!this.props.runningSince,onStartClick:this.handleStartClick,onStopClick:this.handleStopClick})]})}}]),n}(o.a.Component),T=function(t){Object(p.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return this.props.timerIsRunning?Object(i.jsx)("div",{className:"ui bottom attached red basic button",onClick:this.props.onStopClick,children:"Stop"}):Object(i.jsx)("div",{className:"ui bottom attached green basic button",onClick:this.props.onStartClick,children:"Start"})}}]),n}(o.a.Component),x=function(t){Object(p.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(s.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={title:t.props.title||"",project:t.props.project||""},t.handleTitleChange=function(e){t.setState({title:e.target.value})},t.handleProjectChange=function(e){t.setState({project:e.target.value})},t.handleSubmit=function(){t.props.onFormSubmit({id:t.props.id,title:t.state.title,project:t.state.project})},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this.props.id?"Update":"Create";return Object(i.jsx)("div",{className:"ui centered card",children:Object(i.jsx)("div",{className:"content",children:Object(i.jsxs)("div",{className:"ui form",children:[Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{children:"Title"}),Object(i.jsx)("input",{type:"text",value:this.state.title,onChange:this.handleTitleChange})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{children:"Project"}),Object(i.jsx)("input",{type:"text",value:this.state.project,onChange:this.handleProjectChange})]}),Object(i.jsxs)("div",{className:"ui two bottom attached buttons",children:[Object(i.jsx)("button",{className:"ui basic blue button",onClick:this.handleSubmit,children:t}),Object(i.jsx)("button",{className:"ui basic red button",onClick:this.props.onFormClose,children:"Cancel"})]})]})})})}}]),n}(o.a.Component),y=S;var F=function(){return Object(i.jsx)(y,{})};c.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(F,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.efcd4ceb.chunk.js.map